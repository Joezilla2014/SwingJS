<project name = "swingjs" default="createDist" basedir=".">
	<description> Generates publishable website for successfully converted applets. </description>
	
	<target name="createDist" id="createDist">
		
		<property name="project.path" value="." />
		
		<!-- Include antcontrib -->
		<taskdef resource="net/sf/antcontrib/antlib.xml">
			<classpath>
		        <pathelement location="tools/ant-contrib.jar" />
		    </classpath>
		</taskdef>
		
		<!--Adding SwingJS Files -->
		<echo>...adding js subdirectory from jsmoljs and js</echo>
		<copy todir="dist/swingjs/js">
			<fileset dir="jsmoljs">		
		  		<include name="core/**/**" />
		  		<include name="j2sJQueryExt.js" />
		  		<include name="j2sApplet.js" />
		  		<include name="j2sSwingJS.js" />
		  		<include name="SJSApplet.js" />
		  	</fileset>
		</copy>
		<copy todir="dist/swingjs/j2s/core">
		  	  <fileset dir="${project.path}/package">
		  	    <include name="package.js" />
		  	  </fileset>
		</copy>
	  	<echo>...adding standard classes from j2s/java </echo>
	   	<copy todir="dist/swingjs/j2s/java"  overwrite="true" >
	      <fileset dir="j2s/java">
	        <include name="**/*.js" />
	      </fileset>
	    </copy>
	  	<echo>...adding modified classes from bin/java </echo>
	  	<copy todir="dist/swingjs/j2s/java"  overwrite="true" >
	      <fileset dir="bin/java">
	        <include name="**/*.js" />
	      </fileset>
	    </copy>
	    <echo>...copying bin/jsjava JavaScript files to j2s/java</echo>
	  	<copy todir="dist/swingjs/j2s/java"  overwrite="true" >
	      <fileset dir="bin/jsjava">
	        <include name="**/*.js" />
	      </fileset>
	    </copy>
	    <echo>...copying bin/jsjavax JavaScript files to j2s/javax</echo>
	  	<copy todir="dist/swingjs/j2s/javax"  overwrite="true" >
	      <fileset dir="bin/jsjavax">
	        <include name="**/*.js" />
	      </fileset>
	    </copy>
	    <echo>...copying bin/jssun JavaScript files to j2s/sun</echo>
	  	<copy todir="dist/swingjs/j2s/sun"  overwrite="true" >
	      <fileset dir="bin/jssun">
	        <include name="**/*.js" />
	      </fileset>
	    </copy>
	    <echo>...copying all other bin/*.js to j2s</echo>
	  	<copy todir="dist/swingjs/j2s"  overwrite="true" >
	      <fileset dir="bin">
	        <include name="**/*.js" />
	        <exclude name="**/java/*.js" />
	        <exclude name="javajs/**/*.js" />
	        <exclude name="jsjava/**/*.js" />
	        <exclude name="jsjavax/**/*.js" />
	        <exclude name="jssun/**/*.js" />
	      </fileset>
	    </copy>
	   	
	  	<!--  we need to remove this dependency -->
	   	<echo>...JU (javajs/util, com/jcraft/jzlib)</echo>
	   	<copy todir="dist/swingjs/j2s/JU" >
	      <fileset dir="bin/javajs/util">
	        <include name="**/*.js" />
	      </fileset>
	        <fileset dir="bin/com/jcraft/jzlib">
	          <include name="**/*.js" />
	        </fileset>
	    </copy>
		<echo>...adding to swingjs/j2s jsmol/bin/javajs/api</echo>
		  	<copy todir="dist/swingjs/j2s/javajs/api"  overwrite="true" >
		      <fileset dir="bin/javajs/api">
		        <include name="*.js" />
		      </fileset>
		    </copy>
		<echo>Changing "jsjava" to "java", "jsjavax" to "javax", and "jssun" to "sun"</echo>
		  	<replace dir="dist/swingjs/" includes="**/*.*" token="jsjava" value="java" />
		  	<replace dir="dist/swingjs/" includes="**/*.js" token="jssun" value="sun" />

		  	<echo>Changing "javajs.util" references to "JU"</echo>
		  	<replace dir="dist/swingjs/" includes="**/*.js" token="javajs.util" value="JU" />
		  		
		  	<echo>...adding to swingjs/j2s property and css files from src (for CalendarData, swingjs.jquery)</echo>
		  	<copy todir="dist/swingjs/j2s"  overwrite="true" >
		      <fileset dir="src">
		        <include name="**/*.properties" />
		        <include name="**/*.css" />
		        <include name="**/*.png" />
		      </fileset>
		    </copy>
		   	
		   	<echo>Fixing J2S compiler errors</echo>
		  	<!-- no idea what this problem could be -->
		  	<replace dir="dist/swingjs/j2s/java/lang" includes="Thread.js" token="(g.Thread" value="(java.lang.Thread" />

		  	<!-- modify class names -->		
		    <echo>removing j2s globals Class and JavaObject</echo>
		    <echo>...replacing Class.forName with Clazz._4Name</echo>
		  	<replace dir="dist/swingjs/j2s" includes="**/*.js" token="Class.forName" value="Clazz._4Name"/>
		    <echo>...replacing JavaObject with Clazz._O</echo>
		  	<replace dir="dist/swingjs/j2s" includes="**/*.js" token=" JavaObject" value=" Clazz._O"/>
		    <echo>...removing all $fz references for sub/superclass common private function names</echo>
		  	<replace dir="dist/swingjs/j2s" includes="**/*.js" token="($fz =" value=""/>
		  	<replace dir="dist/swingjs/j2s" includes="**/*.js" token=", $fz.isPrivate = true, $fz)" value=""/>
		  	<echo>...changing Clazz.pu$h() to Clazz.pu$h(self.c$) (only a partial fix)</echo>
		  	<replace dir="dist/swingjs/j2s" includes="**/*.js" token="Clazz.pu$h()" value="Clazz.pu$h(self.c$)"/>
		  	<replace dir="dist/swingjs/j2s" includes="**/*.js" token="Clazz.pu$h ()" value="Clazz.pu$h(self.c$)"/>
		   	   	

		    <echo>...abbreviating class name "javajs.util", and "com.jcraft.jzlib" to "JU"</echo>
		  	<replace dir="dist/swingjs/j2s" includes="**/*.js" token="javajs.util" value="JU"/>
		  	<replace dir="dist/swingjs/j2s" includes="**/*.js" token="com.jcraft.jzlib" value="JU"/>
		   	  	   	  	
		  	
		  	
		  	<echo>...adding jQuery and minimizing it</echo>
		  	<copy todir="dist/swingjs/jquery">
		  	  <fileset dir="lib/jquery">
		  	    <include name="**/*" />
		  	  </fileset>
		    </copy>
		   	<java jar="jars/closure_compiler.jar" fork="true" dir="dist/swingjs/jquery" failonerror="false">
		   		<arg line="--js jquery.js --js_output_file jquery.min.js" />
		    </java>

		   	<echo>...adding jsmol.php</echo>
		  	<copy todir="dist/swingjs/php">
		  	  <fileset dir="${project.path}/php">
		  	    <include name="**/*" />
		  	  </fileset>
		    </copy>
		
		<echo>creating minimal core.z.js</echo>
		  	
		    <antcall target="call-core">
		        <param name="call-core.name" value="" />
		        <param name="call-core.list" value="
		            JU/DebugJS.js
		        	"/>
		    </antcall>
		    

		    <antcall target="call-core">
		        <param name="call-core.name" value="swingjs" />
		        <param name="call-core.list" value="
		        	JU/DebugJS.js
		            java/awt/ActiveEvent.js
		            java/awt/AWTEvent.js
		            java/awt/AWTEventMulticaster.js
		            java/awt/event/ActionEvent.js
		            java/awt/event/ActionListener.js
		            java/awt/event/AdjustmentListener.js
		            java/awt/event/AWTEventListener.js
		            java/awt/event/AWTEventListenerProxy.js
		            java/awt/event/ComponentEvent.js
		            java/awt/event/ComponentListener.js
		            java/awt/event/ContainerEvent.js
		            java/awt/event/ContainerListener.js
		            java/awt/event/FocusEvent.js
		            java/awt/event/FocusListener.js
		            java/awt/event/HierarchyBoundsListener.js
		            java/awt/event/HierarchyEvent.js
		            java/awt/event/HierarchyListener.js
		            java/awt/event/InputEvent.js
		            java/awt/event/InputMethodEvent.js
		            java/awt/event/InputMethodListener.js
		            java/awt/event/InvocationEvent.js
		            java/awt/event/ItemEvent.js
		            java/awt/event/ItemListener.js
		            java/awt/event/KeyEvent.js
		            java/awt/event/KeyListener.js
		            java/awt/event/MouseEvent.js
		            java/awt/event/MouseListener.js
		            java/awt/event/MouseMotionListener.js
		            java/awt/event/MouseWheelEvent.js
		            java/awt/event/MouseWheelListener.js
		            java/awt/event/PaintEvent.js
		            java/awt/event/TextListener.js
		            java/awt/event/WindowAdapter.js
		            java/awt/event/WindowEvent.js
		            java/awt/event/WindowFocusListener.js
		            java/awt/event/WindowListener.js
		            java/awt/event/WindowStateListener.js
		            java/awt/EventDispatchThread.js
		            java/awt/EventFilter.js
		            java/awt/EventQueue.js
		            java/awt/ModalEventFilter.js
		            java/awt/SentEvent.js
		            java/awt/SequencedEvent.js
		            java/beans/IndexedPropertyChangeEvent.js
		            java/beans/PropertyChangeEvent.js
		            javax/swing/event/AncestorEvent.js
		            javax/swing/event/AncestorListener.js
		            javax/swing/event/ChangeEvent.js
		            javax/swing/event/ChangeListener.js
		            javax/swing/event/EventListenerList.js
		            javax/swing/event/MenuDragMouseEvent.js
		            javax/swing/event/MenuDragMouseListener.js
		            javax/swing/event/MenuEvent.js
		            javax/swing/event/MenuKeyEvent.js
		            javax/swing/event/MenuKeyListener.js
		            javax/swing/event/MenuListener.js
		            javax/swing/event/PopupMenuEvent.js
		            javax/swing/event/PopupMenuListener.js
		            javax/swing/event/SwingPropertyChangeSupport.js
		            javax/swing/SwingPaintEventDispatcher.js
		            sun/applet/AppletEvent.js
		            sun/applet/AppletEventMulticaster.js
		            sun/awt/EventQueueItem.js
		            sun/awt/PaintEventDispatcher.js
		            sun/awt/PeerEvent.js
		            sun/awt/PostEventQueue.js
		            java/applet/Applet.js
		            java/applet/AppletContext.js
		            java/applet/AppletStub.js
		            java/awt/AWTError.js
		            java/awt/AWTKeyStroke.js
		            java/awt/BasicStroke.js
		            java/awt/BorderLayout.js
		            java/awt/Color.js
		            java/awt/color/ColorSpace.js
		            java/awt/ColorPaintContext.js
		            java/awt/Component.js
		            java/awt/ComponentOrientation.js
		            java/awt/Conditional.js
		            java/awt/Container.js
		            java/awt/Cursor.js
		            java/awt/Dialog.js
		            java/awt/Dimension.js
		            java/awt/FlowLayout.js
		            java/awt/Font.js
		            java/awt/font/FontRenderContext.js
		            java/awt/font/TextAttribute.js
		            java/awt/FontMetrics.js
		            java/awt/Frame.js
		            java/awt/JSComponent.js
		            java/awt/geom/AffineTransform.js
		            java/awt/geom/CubicCurve2D.js
		            java/awt/geom/Dimension2D.js
		            java/awt/geom/FlatteningPathIterator.js
		            java/awt/geom/IllegalPathStateException.js
		            java/awt/geom/Line2D.js
		            java/awt/geom/LineIterator.js
		            java/awt/geom/NoninvertibleTransformException.js
		            java/awt/geom/Path2D.js
		            java/awt/geom/PathIterator.js
		            java/awt/geom/Point2D.js
		            java/awt/geom/QuadCurve2D.js
		            java/awt/geom/QuadIterator.js
		            java/awt/geom/Rectangle2D.js
		            java/awt/geom/RectangularShape.js
		            java/awt/geom/RectIterator.js
		            java/awt/Graphics.js
		            java/awt/Graphics2D.js
		            java/awt/GraphicsCallback.js
		            java/awt/GraphicsEnvironment.js
		            java/awt/IllegalComponentStateException.js
		            java/awt/image/ColorModel.js
		            java/awt/image/DataBuffer.js
		            java/awt/image/DataBufferByte.js
		            java/awt/image/DataBufferInt.js
		            java/awt/image/DirectColorModel.js
		            java/awt/image/ImageObserver.js
		            java/awt/image/MultiPixelPackedSampleModel.js
		            java/awt/image/PackedColorModel.js
		            java/awt/image/Raster.js
		            java/awt/image/RasterFormatException.js
		            java/awt/image/SampleModel.js
		            java/awt/image/SinglePixelPackedSampleModel.js
		            java/awt/Insets.js
		            java/awt/ItemSelectable.js
		            java/awt/LayoutManager.js
		            java/awt/LayoutManager2.js
		            java/awt/Paint.js
		            java/awt/PaintContext.js
		            java/awt/Panel.js
		            java/awt/peer/ComponentPeer.js
		            java/awt/peer/ContainerPeer.js
		            java/awt/peer/LightweightPeer.js
		            java/awt/peer/PanelPeer.js
		            java/awt/Point.js
		            java/awt/Rectangle.js
		            java/awt/RenderingHints.js
		            java/awt/Shape.js
		            java/awt/Stroke.js
		            java/awt/Toolkit.js
		            java/awt/Transparency.js
		            java/awt/Window.js
		            java/beans/ChangeListenerMap.js
		            java/beans/PropertyChangeListener.js
		            java/beans/PropertyChangeListenerProxy.js
		            java/beans/PropertyChangeSupport.js
		            java/io/BufferedInputStream.js
		            java/io/BufferedReader.js
		            java/io/ByteArrayInputStream.js
		            java/io/FilterInputStream.js
		            java/io/InputStream.js
		            java/io/InputStreamReader.js
		            java/io/Reader.js
		            java/io/StringReader.js
		            java/lang/AbstractStringBuilder.js
		            java/lang/Enum.js
		            java/lang/StringBuffer.js
		            java/lang/StringBuilder.js
		            java/lang/Thread.js
		            java/lang/ThreadGroup.js
		            java/net/MalformedURLException.js
		            java/net/URL.js
		        	java/net/URLStreamHandlerFactory.js
		        	java/net/URLStreamHandler.js
		        	java/net/URLConnection.js
		        	java/net/UnknownServiceException.js
		        	java/text/AttributedCharacterIterator.js
		            java/text/CharacterIterator.js
		            java/util/AbstractCollection.js
		            java/util/AbstractList.js
		            java/util/AbstractMap.js
		            java/util/AbstractSequentialList.js
		            java/util/AbstractSet.js
		            java/util/ArrayList.js
		            java/util/Arrays.js
		            java/util/Collections.js
		            java/util/Dictionary.js
		            java/util/HashMap.js
		            java/util/HashSet.js
		            java/util/Hashtable.js
		            java/util/IdentityHashMap.js
		            java/util/LinkedList.js
		            java/util/Locale.js
		            java/util/MapEntry.js
		            java/util/Random.js
		            java/util/ResourceBundle.js
		            java/util/SortedMap.js
		            java/util/SortedSet.js
		            java/util/StringTokenizer.js
		            java/util/Vector.js
		            javajs/api/GenericLineReader.js
		            javajs/api/JSONEncodable.js
		            javax/swing/AbstractAction.js
		            javax/swing/AbstractButton.js
		            javax/swing/Action.js
		            javax/swing/ActionMap.js
		            javax/swing/ActionPropertyChangeListener.js
		            javax/swing/AncestorNotifier.js
		            javax/swing/ArrayTable.js
		            javax/swing/border/AbstractBorder.js
		            javax/swing/border/Border.js
		            javax/swing/ButtonModel.js
		            javax/swing/CellRendererPane.js
		            javax/swing/ClientPropertyKey.js
		            javax/swing/ComponentInputMap.js
		            javax/swing/DefaultButtonModel.js
		            javax/swing/DefaultSingleSelectionModel.js
		            javax/swing/InputMap.js
		            javax/swing/JApplet.js
		            javax/swing/JComponent.js
		            javax/swing/JDialog.js
		            javax/swing/JFrame.js
		            javax/swing/JLayeredPane.js
		            javax/swing/JMenu.js
		            javax/swing/JMenuBar.js
		            javax/swing/JMenuItem.js
		            javax/swing/JPanel.js
		            javax/swing/JPopupMenu.js
		            javax/swing/JRootPane.js
		            javax/swing/JSeparator.js
		            javax/swing/JToolTip.js
		            javax/swing/JWindow.js
		            javax/swing/KeyboardManager.js
		            javax/swing/KeyStroke.js
		            javax/swing/MenuElement.js
		            javax/swing/MenuSelectionManager.js
		            javax/swing/OverlayLayout.js
		            javax/swing/plaf/UIResource.js
		            javax/swing/Popup.js
		            javax/swing/PopupFactory.js
		            javax/swing/RepaintManager.js
		            javax/swing/RootPaneContainer.js
		            javax/swing/SingleSelectionModel.js
		            javax/swing/SizeRequirements.js
		            javax/swing/SwingConstants.js
		            javax/swing/SwingHeavyWeight.js
		            javax/swing/SwingUtilities.js
		            javax/swing/UIManager.js
		            javax/swing/WindowConstants.js
		            sun/applet/AppletListener.js
		            sun/awt/AppContext.js
		            sun/awt/AWTAccessor.js
		            sun/awt/AWTAutoShutdown.js
		            sun/awt/ComponentFactory.js
		            sun/awt/ConstrainableGraphics.js
		            sun/awt/geom/Curve.js
		            sun/awt/Graphics2Delegate.js
		            sun/awt/ModalExclude.js
		            sun/awt/NullComponentPeer.js
		            sun/awt/RequestFocusController.js
		            sun/awt/SunGraphicsCallback.js
		            sun/awt/SunToolkit.js
		            sun/awt/WindowClosingListener.js
		            sun/awt/WindowClosingSupport.js
		            sun/font/FontDesignMetrics.js
		            sun/java2d/StateTrackable.js
		            sun/java2d/StateTrackableDelegate.js
		            sun/java2d/StateTracker.js
		            sun/java2d/SunGraphics2D.js
		            sun/swing/UIAction.js
		        	JU/AjaxURLStreamHandlerFactory.js
		        	JU/AjaxURLStreamHandler.js
		        	JU/AjaxURLConnection.js
		            JU/AU.js
		            JU/Base64.js
		            JU/Encoding.js
		            JU/Lst.js
		            JU/Rdr.js
		            JU/SB.js
		            JU/T3.js
		            JU/V3.js
		            swingjs/api/HTML5CanvasContext2D.js
		            swingjs/api/Interface.js
		            swingjs/api/JSFunction.js
		            swingjs/api/J2SInterface.js
		            swingjs/api/JSInterface.js
		            swingjs/JSAppletViewer.js
		            swingjs/JSFrameViewer.js
		            swingjs/JSAppletThread.js
		            swingjs/JSNullComponentPeer.js
		            swingjs/JSGraphics2D.js
		            swingjs/JSMouse.js
		            swingjs/JSThread.js
		            swingjs/JSThreadGroup.js
		            swingjs/JSToolkit.js
		            swingjs/JSUtil.js
		        	"/>
		    </antcall>
		
		<delete quiet="true" dir="dist/swingjs/js/core" />
		
		<copy todir="${basedir}/dist/applets/">
			<fileset dir="${basedir}/src/test/">
				<contains text="//web_Ready"/>
			</fileset>
			<fileset dir="${basedir}/src/org/uwi/">
				<contains text="//web_Ready"/>
			</fileset>
		</copy>
		
		<macrodef name="getAppletInfo">
			<attribute name="file"/>
			<sequential>
				<loadproperties srcfile="@{file}">
					<filterchain>
						<linecontains>
							<contains value="//web_"/>
						</linecontains>
						<tokenfilter>
							<replacestring from="//web_" to=""/>
						</tokenfilter>
					</filterchain>
				</loadproperties>
			</sequential>
		</macrodef>
		
		<delete file="dist/website/addedApplets.html"/>
		
		<foreach target="genWebpage" param="applet">
			<path>
			<fileset dir="${basedir}/dist/applets/">
			</fileset>
			</path>
		</foreach>
		
		<echo file="dist/website/addedApplets.html" append="true">
			<![CDATA[
			<script>
				$(document).ready(function () {
			    	size_li = $("#container .work-item").size();
			    	x = 6;
			    	$('#showLess').hide();
			    	$('.work-item:lt('+x+')').show();
				});

				$('#loadMore').on('click', function () {
					x = size_li;
					$('.work-item:lt('+x+')').show();
					$('#showLess').show();
					$('#loadMore').hide();
				});
			    $('#showLess').click(function () {
			        x = size_li - 6;
			        $('.work-item:lt('+x+')').hide();
			        $('#loadMore').show();
			        $('#showLess').hide();
			    });

			    var $divs = $("div.work-item");
				$('#alphBnt').on('click', function () {
					document.getElementById("sortation").innerHTML = "Name";
			    	var alphabeticallyOrderedDivs = $divs.sort(function (a, b) {
			        	return $(a).find("h3").text() > $(b).find("h3").text();
			    	});
			    	$("#container").html(alphabeticallyOrderedDivs);
				});

				$('#numBnt').on('click', function () {
					document.getElementById("sortation").innerHTML = "Newest First";
			    	var alphabeticallyOrderedDivs = $divs.sort(function (a, b) {
			        	return $(a).find("id").text() < $(b).find("id").text();
			    	});
			    	$("#container").html(alphabeticallyOrderedDivs);
				});

				$('#catBnt').on('click', function () {
					document.getElementById("sortation").innerHTML = "Category";
			    	var alphabeticallyOrderedDivs = $divs.sort(function (a, b) {
			        	return $(a).find("cat").text() > $(b).find("cat").text();
			    	});
			    	$("#container").html(alphabeticallyOrderedDivs);
				});
			
				$('#feaBnt').click(function () {
					var feat_ele = document.getElementsByTagName('feat');
					for (var i = 0; i < feat_ele.length; ++i) {
						feat_ele[i].style.display = (feat_ele[i].style.display == "block") ? "none" : "block";
						document.getElementById("feaBnt").innerHTML = (document.getElementById("feaBnt").innerHTML == "Hide Program Features") ? "View Program Features" : "Hide Program Features";  
					}
				});
			</script> ]]>
		</echo>
	</target>

	<target name="genWebpage" id="genWebpage">
		<echo message="creating webpage for ${applet}"/>
		<getAppletInfo file="${applet}"/>
		
		<echo file="dist/website/addedApplets.html" append="true">
			<![CDATA[
			<div class="4u work-item">
				<a href="applets/${AppletName}.html"><span class="image fit thumb"><img src="${AppletImage}" alt="" /></span></a>
				<h3>${AppletName}</h3>
				<p>${Description}</p>
				<cat>${Category}</cat>
				<id>${Date}</id>
				<feat><hr /><b>Demonstrates:</b> ${Features}</feat>
			</div>
			]]>
		</echo>
		
		<echo file="${basedir}/dist/website/applets/${AppletName}.html" append="false">
			<![CDATA[
			<html>
				<head>
					<title>SwingJS | ${AppletName}</title>
					<meta charset="utf-8" />
					<meta name="viewport" content="width=device-width, initial-scale=1" />
					<!--[if lte IE 8]><script src="../assets/js/ie/html5shiv.js"></script><![endif]-->
					<link rel="stylesheet" href="../assets/css/applet.css" />
					<!--[if lte IE 8]><link rel="stylesheet" href="../assets/css/ie8.css" /><![endif]-->

					<!--SwingJS files-->
					<script type="text/javascript" src="../../swingjs/jquery/jquery.js"></script>
					<script type="text/javascript" src="../../swingjs/js/j2sJQueryExt.js"></script>
					<script type="text/javascript" src="../../swingjs/js/j2sApplet.js"></script>
					<script type="text/javascript" src="../../swingjs/js/j2sSwingJS.js"></script>
					<script type="text/javascript" src="../../swingjs/js/SJSApplet.js"></script>

					<script type="text/javascript">

						J2S._checkLoad = true;

						J2S._isAsync = false;

						J2S.getProfile() // records repeat calls to overridden or overloaded Java methods

						// use ?_USE=JAVA or _USE=SIGNED or _USE=HTML5

						jmol_isReady = function(applet) {
							//document.title = (applet._id + " is ready")
							J2S._getElement(applet, "appletdiv").style.border="1px solid #787878"
	 
						}		

						Info = {
	    					code: "${Location}",
							width: 700,
							height: 500,
							debug: false,
							color: "#787878",
							zIndexBase: 20000,
							z:{monitorZIndex:100},
							serverURL: "http://chemapps.stolaf.edu/jmol/jsmol/php/jsmol.php",
							use: "HTML5",
							j2sPath: "../../swingjs/j2s",
							jarPath: "../../swingjs/java",
							//	jarFile: "JStest.jar",
							isSigned: false,
							disableJ2SLoadMonitor: false,
							disableInitialConsole: false,
							console:"sysoutdiv",
		  					useFrame:"false",
							readyFunction: jmol_isReady,
		  					allowjavascript: true
						}


						function dateTest() {

		  					Class.loadClass()

		  					Class.loadClass(
								"java.text.SimpleDateFormat",
								function() {
									alert(new java.text.SimpleDateFormat($("#date").val()).format(new Date))
								}
		  					);
						}

	 					function showhide(id) {
	    					var e = document.getElementById(id);
	    					e.style.display = (e.style.display == "block") ? "none" : "block";
	 					}
					</script>
				</head>
				<body id="top">

					<!-- Header -->
						<header id="header">
							<a href="../index.html" class="image avatar"><img src="../images/avatar.jpg" alt="" /></a>
							<h1><strong>${AppletName}:</strong> ${Description}</h1>
						</header>

			<!-- Main -->
				<div id="main_sub">
					<div class="row">
						<ul class="actions small">
							<li><a href="javascript:showhide('sysout')" class="button pretty small">Show System.out</a></li>
							<li><a href="${JavaSource}" class="button pretty small" alt="requires java-enabled browser">Java Source</a></li>
						</ul>
					</div>
					<div class="nostyle">
						<script>SwingJS.getApplet("testApplet", Info)</script>
					</div>
					<div id="sysout" style="position:relative;padding-top:1em;width:600px;height:300px;display: none">
						<div id="sysoutdiv" style="border:1px solid green;width:100%;height:95%;overflow:auto"></div>
					</div><hr />
					<ul class="actions">
						<li><a href="../index.html" class="button pretty">Return to Index</a></li>
					</ul>
				</div>

				<!-- Footer -->
				<footer id="footer">
					<ul class="icons">
						<li><a href="https://sourceforge.net/p/swingjs/code/HEAD/tree/" class="icon fa-archive"><span class="label">View Source Code</span></a></li>
						<li><a href="../index.html#three" class="icon fa-envelope-o"><span class="label">Email</span></a></li>
					</ul>
					<ul class="copyright">
						<li>Assembled by St. Olaf College</li>
					</ul>
				</footer>

			<!-- Scripts -->
				<script src="../assets/js/jquery.min.js"></script>
				<script src="../assets/js/jquery.poptrox.min.js"></script>
				<script src="../assets/js/skel.min.js"></script>
				<script src="../assets/js/util.js"></script>
				<!--[if lte IE 8]><script src="../assets/js/ie/respond.min.js"></script><![endif]-->
				<script src="../assets/js/main.js"></script>

				</body>
			</html>
			]]>
		</echo>
	</target>
	
	<target name="call-core" id="call-core">
	   	<echo>......Creating core${call-core.name}.js</echo> 	
	   	<concat destfile="dist/swingjs/js/core/tmp.js">
	   		<filelist dir="dist/swingjs/j2s" files="${call-core.list}" />
	   	</concat>
		<replace dir="dist/swingjs/js/core" includes="tmp.js" token="Clazz." value="Clazz_"/>
		  	<replace dir="dist/swingjs/js/core" includes="tmp.js" token="Clazz__" value="Clazz._"/>
		  	<replace dir="dist/swingjs/js/core" includes="tmp.js" token="($fz = " value=""/>
		  	<replace dir="dist/swingjs/js/core" includes="tmp.js" token=", $fz.isPrivate = true, $fz)" value=""/> 	
		   	<concat destfile="dist/swingjs/j2s/core/core${call-core.name}.js"><filelist dir="dist/swingjs/js" files="
		   		core/coretop2.js
		   		core/tmp.js
		   		core/corebottom2.js
		   		" />
		   	</concat>
		  	  	
		   	<echo>......Generating core${call-core.name}.z.js</echo> 	
		  	<if><equals arg1="${debugging}" arg2="true" /><then>
		  	    <copy file="dist/swingjs/j2s/core/core${call-core.name}.js" tofile="dist/swingjs/j2s/core/core${call-core.name}.z.js" />
		    </then><else>
			   	<java jar="jars/closure_compiler.jar" fork="true" dir="dist/swingjs/j2s/core" failonerror="false">
			   		<arg line="--js core${call-core.name}.js --js_output_file core${call-core.name}.z.js" />
			    </java>
		    </else></if>
		 	<delete quiet="true" file="dist/swingjs/js/core/tmp.js" />
	</target>
	
	<target name="call-min" id="call-min">
	   	<echo>......Creating JSmol.${call-min.minname}.js</echo> 	
	   	<concat destfile="dist/swingjs/js/SwingJS.${call-min.fullname}.js">
	   		<filelist dir="jsmoljs" files="${call-min.list}" />
	   	</concat>   
	  	<if><equals arg1="${debugging}" arg2="true" /><then>
	  	    <copy file="dist/swingjs/js/SwingJS.${call-min.fullname}.js" tofile="dist/swingjs/SwingJS.${call-min.minname}.js" />
	    </then><else>
		   	<java jar="jars/closure_compiler.jar" fork="true" dir="" failonerror="false">
		   		<arg line="--js dist/swingjs/js/SwingJS.${call-min.fullname}.js --js_output_file dist/swingjs/SwingJS.${call-min.minname}.js" />
		    </java>
	    </else></if>
	  </target>
	
</project>